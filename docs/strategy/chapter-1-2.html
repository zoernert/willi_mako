<h2>Kapitel 1.2: Struktur einer EDIFACT-Nachricht (UNB, UNH, UNT, UNZ)</h2>

<p>In diesem Kapitel tauchen wir tiefer in die grundlegende Struktur einer <strong>EDIFACT</strong>-Nachricht ein. Wir betrachten die wichtigsten Segmente, die jede Nachricht umschließen und für den korrekten Datenaustausch in der <strong>Marktkommunikation</strong> der <strong>Energiewirtschaft</strong> unerlässlich sind: UNB, UNH, UNT und UNZ. Ein Verständnis dieser Segmente ist entscheidend, um <strong>EDIFACT</strong>-Nachrichten zu erstellen, zu interpretieren und Fehler zu beheben. Das <strong>BDEW</strong>-Regelwerk legt die spezifischen Anforderungen für diese Segmente in der deutschen Energiewirtschaft fest.</p>

<h3>Die Grundstruktur einer EDIFACT-Nachricht</h3>

<p>Eine EDIFACT-Nachricht lässt sich vereinfacht in folgende Bestandteile gliedern:</p>
<ul>
    <li><strong>UNB (Interchange Header):</strong> Der "Umschlagkopf" – identifiziert den Sender und Empfänger der gesamten Nachrichtengruppe.</li>
    <li><strong>UNH (Message Header):</strong> Der "Nachrichtenkopf" – identifiziert den Nachrichtentyp und die Nachrichtenreferenznummer.</li>
    <li><em>Datensegmente:</em> Der eigentliche Inhalt der Nachricht, bestehend aus verschiedenen Segmenten, die die auszutauschenden Daten enthalten (z.B. Stammdaten, Messwerte).</li>
    <li><strong>UNT (Message Trailer):</strong> Der "Nachrichtenfuß" – enthält die Anzahl der Segmente in der Nachricht und die Nachrichtenreferenznummer (zur Validierung).</li>
    <li><strong>UNZ (Interchange Trailer):</strong> Der "Umschlagfuß" – enthält die Anzahl der Nachrichten in der Gruppe und die Umschlagreferenznummer (zur Validierung).</li>
</ul>

<h2>Die Segmente im Detail</h2>

<h3>UNB – Interchange Header (Umschlagkopf)</h3>

<p>Das <strong>UNB</strong>-Segment ist der Startpunkt jeder EDIFACT-Nachricht. Es enthält wichtige Informationen über den Absender, den Empfänger und die Syntax der Nachricht. Es fungiert als eine Art "Umschlag" für die gesamte Nachrichtengruppe.</p>

<p><strong>Beispiel:</strong></p>
<pre><code>UNB+UNOC:3+SENDER_ID:ZZZ:1234+RECEIVER_ID:ZZZ:5678+240126:1000+12345+++++BDEW'</code></pre>

<p><strong>Erläuterung:</strong></p>
<ul>
    <li><code>UNB</code>: Kennzeichnet das Segment als UNB-Segment.</li>
    <li><code>UNOC:3</code>: Gibt den verwendeten EDIFACT-Syntaxstandard an (UNOC Version 3).</li>
    <li><code>SENDER_ID:ZZZ:1234</code>: Identifiziert den Absender (SENDER_ID) mit Qualifier (ZZZ) und Code (1234).</li>
    <li><code>RECEIVER_ID:ZZZ:5678</code>: Identifiziert den Empfänger (RECEIVER_ID) mit Qualifier (ZZZ) und Code (5678).</li>
    <li><code>240126:1000</code>: Datum (240126 = 26. Januar 2024) und Uhrzeit (1000 = 10:00 Uhr) der Nachrichtenerstellung.</li>
    <li><code>12345</code>: Eine eindeutige Referenznummer für den Nachrichtenaustausch.</li>
    <li><code>+++++BDEW</code>: Spezifische Informationen, in diesem Fall die Kennzeichnung als BDEW-Nachricht.</li>
</ul>

<h3>UNH – Message Header (Nachrichtenkopf)</h3>

<p>Das <strong>UNH</strong>-Segment kennzeichnet den Beginn einer einzelnen Nachricht innerhalb des Umschlags. Es identifiziert den Nachrichtentyp (z.B. UTILMD, MSCONS) und vergibt eine eindeutige Referenznummer für diese Nachricht.</p>

<p><strong>Beispiel:</strong></p>
<pre><code>UNH+12345+UTILMD:D:21BPDE:BDEW:1:FOO'</code></pre>

<p><strong>Erläuterung:</strong></p>
<ul>
    <li><code>UNH</code>: Kennzeichnet das Segment als UNH-Segment.</li>
    <li><code>12345</code>: Eine eindeutige Referenznummer für diese Nachricht.  Diese Referenznummer muss im UNT-Segment wiederholt werden.</li>
    <li><code>UTILMD:D:21BPDE:BDEW:1:FOO</code>: Identifiziert den Nachrichtentyp (UTILMD), die Version (D), den Sub-Release (21BPDE), die Organisation (BDEW), den Release (1) und ggf. eine anwendungsspezifische Kennung (FOO).</li>
</ul>

<h3>UNT – Message Trailer (Nachrichtenfuß)</h3>

<p>Das <strong>UNT</strong>-Segment markiert das Ende einer einzelnen Nachricht. Es enthält die Anzahl der Segmente in der Nachricht (inklusive UNH und UNT) und die Nachrichtenreferenznummer aus dem UNH-Segment. Dies dient der Validierung der Nachricht.</p>

<p><strong>Beispiel:</strong></p>
<pre><code>UNT+25+12345'</code></pre>

<p><strong>Erläuterung:</strong></p>
<ul>
    <li><code>UNT</code>: Kennzeichnet das Segment als UNT-Segment.</li>
    <li><code>25</code>: Die Gesamtzahl der Segmente in der Nachricht (inklusive UNH und UNT).</li>
    <li><code>12345</code>: Die Nachrichtenreferenznummer, die mit der Referenznummer im UNH-Segment übereinstimmen muss.</li>
</ul>

<h3>UNZ – Interchange Trailer (Umschlagfuß)</h3>

<p>Das <strong>UNZ</strong>-Segment markiert das Ende des gesamten Nachrichtenaustauschs (Umschlags). Es enthält die Anzahl der Nachrichten in der Gruppe und die Umschlagreferenznummer aus dem UNB-Segment. Dies dient der Validierung des gesamten Austauschs.</p>

<p><strong>Beispiel:</strong></p>
<pre><code>UNZ+1+12345'</code></pre>

<p><strong>Erläuterung:</strong></p>
<ul>
    <li><code>UNZ</code>: Kennzeichnet das Segment als UNZ-Segment.</li>
    <li><code>1</code>: Die Anzahl der Nachrichten in diesem Austausch (Umschlag).</li>
    <li><code>12345</code>: Die Umschlagreferenznummer, die mit der Referenznummer im UNB-Segment übereinstimmen muss.</li>
</ul>

<h2>Praktische Beispiele</h2>

<p>Betrachten wir ein einfaches Beispiel einer UTILMD-Nachricht (Stammdatenmeldung):</p>

<pre><code>UNB+UNOC:3+SENDER_ID:ZZZ:1234+RECEIVER_ID:ZZZ:5678+240126:1000+12345+++++BDEW'
UNH+12345+UTILMD:D:21BPDE:BDEW:1:FOO'
BGM+52+M12345+9'
NAD+MS+DE12345678901+LIEFERANT'
LOC+139+47110815'
LOC+135+Berlin'
UNT+6+12345'
UNZ+1+12345'
</code></pre>

<p>In diesem Beispiel sehen wir die grundlegende Struktur einer EDIFACT-Nachricht mit den Segmenten UNB, UNH, BGM, NAD, LOC, UNT und UNZ. Die BGM-, NAD- und LOC-Segmente enthalten die eigentlichen Stammdaten.  Dieses Beispiel ist stark vereinfacht, um die Kernstruktur zu verdeutlichen.</p>

<h2>Herausforderungen und Best Practices</h2>

<p>Die korrekte Implementierung der <strong>EDIFACT Struktur</strong> ist entscheidend für einen reibungslosen Datenaustausch. Fehler in den Segmenten <strong>UNB</strong>, <strong>UNH</strong>, <strong>UNT</strong> oder <strong>UNZ</strong> können zu Fehlinterpretationen oder Ablehnungen der Nachricht führen. Es ist daher wichtig, die <strong>BDEW</strong>-Vorgaben genau zu beachten und Validierungstools einzusetzen.  [LINK:Willi-Mako bietet umfassende Validierungsfunktionen, um sicherzustellen, dass Ihre EDIFACT-Nachrichten den Standards entsprechen.|https://stromhaltig.de/app]</p>

<p>Einige Best Practices für den Umgang mit der EDIFACT-Struktur:</p>
<ul>
    <li><strong>Korrekte Zählung der Segmente:</strong> Stellen Sie sicher, dass die Anzahl der Segmente im UNT-Segment korrekt ist.</li>
    <li><strong>Übereinstimmende Referenznummern:</strong> Vergewissern Sie sich, dass die Referenznummern im UNH- und UNT-Segment sowie im UNB- und UNZ-Segment übereinstimmen.</li>
    <li><strong>Verwendung von Validierungstools:</strong> Nutzen Sie Validierungstools, um Ihre EDIFACT-Nachrichten auf Fehler zu prüfen.</li>
    <li><strong>Klare Dokumentation:</strong> Dokumentieren Sie Ihre EDIFACT-Implementierung, um die Wartung und Fehlerbehebung zu erleichtern.</li>
</ul>

<h2>Fazit</h2>

<p>Ein solides Verständnis der <strong>EDIFACT Struktur</strong>, insbesondere der Segmente <strong>UNB</strong>, <strong>UNH</strong>, <strong>UNT</strong> und <strong>UNZ</strong>, ist unerlässlich für alle, die in der <strong>Marktkommunikation</strong> der <strong>Energiewirtschaft</strong> tätig sind. Durch die Beachtung der <strong>BDEW</strong>-Vorgaben und den Einsatz geeigneter Tools können Sie einen reibungslosen und effizienten Datenaustausch gewährleisten.  <strong>EDIFACT</strong> mag komplex erscheinen, aber mit dem richtigen Wissen und den richtigen Werkzeugen können Sie die Herausforderungen meistern. [LINK:Benötigen Sie Unterstützung bei der Erstellung und Validierung von EDIFACT-Nachrichten? Kontaktieren Sie uns für eine Demo!|https://stromhaltig.de/app/register]</p>

<h2>Praxis-Tipps</h2>

<ul>
    <li><strong>Nutzen Sie Testumgebungen:</strong> Testen Sie Ihre EDIFACT-Implementierung in einer Testumgebung, bevor Sie sie in Produktion einsetzen.</li>
    <li><strong>Überwachen Sie Ihre Nachrichtenflüsse:</strong> Überwachen Sie Ihre EDIFACT-Nachrichtenflüsse, um Probleme frühzeitig zu erkennen.</li>
    <li><strong>Bleiben Sie auf dem Laufenden:</strong> Die EDIFACT-Standards und die BDEW-Vorgaben ändern sich im Laufe der Zeit. Bleiben Sie auf dem Laufenden, um sicherzustellen, dass Ihre Implementierung aktuell ist.</li>
</ul>
